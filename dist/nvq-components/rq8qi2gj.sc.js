/*! Built with http://stenciljs.com */
const{h:t}=window.NvqComponents;var e=function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function s(t){try{a(i.next(t))}catch(t){r(t)}}function l(t){try{a(i.throw(t))}catch(t){r(t)}}function a(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,l)}a((i=i.apply(t,e||[])).next())})};class n{constructor(){this.items=[],this.endpoint="",this.componentAttribubte="data-nvq-autocomplete"}itemsSourceHandler(t){(t=>{let e=document.createElement("a");return e.href=t,e.host&&e.host!=window.location.host})(t)?this.endpoint=t:this.items=t.split(",")}isLocal(){return""==this.endpoint||null==this.endpoint||void 0==this.endpoint}handleInput(t){return e(this,void 0,void 0,function*(){let e=t.target;this.items!==[]&&0!=this.items.length||this.itemsSourceHandler(this.itemsSource);let n=t=>(t.setAttribute(this.componentAttribubte,""),t),i=t=>{let e=document.createElement("div");return(e=n(e)).setAttribute("class","autocomplete-row"),e.innerHTML="<strong>"+t+"</strong>",e},o=()=>{let t=[];for(let e in this.items)if(this.items[e].toLowerCase().includes(a.toLocaleLowerCase())){let n=i(this.items[e]);t.push(n)}return t},r=t=>{let e=this.endpoint+t;return fetch(e).then(t=>t.json()).then(t=>t.toString())},s=()=>{var t=e.parentNode.querySelector("#autocomplete-list");null!=t&&void 0!=t&&e.parentNode.removeChild(t)},l=t=>{if(s(),t.length>0){let i=(t=>{let e=document.createElement("div");(e=n(e)).setAttribute("id","autocomplete-list"),e.setAttribute("class","autocomplete-items");for(let n of t)e.appendChild(n);return e})(t);e.parentNode.appendChild(i)}},a=e.value;if(""!==a&&void 0!==a)if(this.isLocal()){let t=o();l(t)}else((t,e)=>{r(t).then(t=>{(t=>{let e=[];for(let n in t){let o=i(t[n]);e.push(o)}l(e)})(t.split(","))})})(a);else s()})}render(){return t("div",null,t("div",{class:"autocomplete"},t("input",{autocomplete:"off",onInput:t=>e(this,void 0,void 0,function*(){return yield this.handleInput(t)}),type:"text",name:this.name,placeholder:this.placeholder,value:this.value})))}static get is(){return"nvq-autocomplete"}static get encapsulation(){return"shadow"}static get properties(){return{itemsSource:{type:String,attr:"items-source",watchCallbacks:["itemsSourceHandler"]},name:{type:String,attr:"name"},placeholder:{type:String,attr:"placeholder"},value:{type:String,attr:"value"}}}static get style(){return"[data-nvq-autocomplete-host]   .autocomplete[data-nvq-autocomplete]{position:relative;display:inline-block;width:300px}[data-nvq-autocomplete-host]   .autocomplete[data-nvq-autocomplete]   input[data-nvq-autocomplete]{border:1px solid transparent;background-color:#f1f1f1;padding:10px;font-size:16px}[data-nvq-autocomplete-host]   .autocomplete[data-nvq-autocomplete]   input[type=text][data-nvq-autocomplete]{background-color:#f1f1f1;width:100%}[data-nvq-autocomplete-host]   .autocomplete[data-nvq-autocomplete]   input[type=submit][data-nvq-autocomplete]{background-color:#1e90ff;color:#fff;cursor:pointer}[data-nvq-autocomplete-host]   .autocomplete[data-nvq-autocomplete]   .autocomplete-items[data-nvq-autocomplete]{position:absolute;z-index:100;top:100%;left:0;right:0;background:red}[data-nvq-autocomplete-host]   .autocomplete[data-nvq-autocomplete]   .autocomplete-items[data-nvq-autocomplete]   .autocomplete-row[data-nvq-autocomplete]{padding:1em;border:1px solid #d4d4d4}[data-nvq-autocomplete-host]   .autocomplete[data-nvq-autocomplete]   .autocomplete-items[data-nvq-autocomplete]   .autocomplete-row[data-nvq-autocomplete]:hover{background-color:#e9e9e9}[data-nvq-autocomplete-host]   .autocomplete-items[data-nvq-autocomplete]{background-color:pink}"}}export{n as NvqAutocomplete};