/*! Built with http://stenciljs.com */
const{h:t}=window.NvqComponents;var e=function(t,e,i,n){return new(i||(i=Promise))(function(s,l){function o(t){try{a(n.next(t))}catch(t){l(t)}}function r(t){try{a(n.throw(t))}catch(t){l(t)}}function a(t){t.done?s(t.value):new i(function(e){e(t.value)}).then(o,r)}a((n=n.apply(t,e||[])).next())})};class i{constructor(){this.items=[],this.endpoint="",this.style={}}itemsSourceHandler(t){(t=>{let e=document.createElement("a");return e.href=t,e.host&&e.host!=window.location.host})(t)?this.endpoint=t:this.items=t.split(",")}isLocal(){return""==this.endpoint||null==this.endpoint||void 0==this.endpoint}handleInput(t){return e(this,void 0,void 0,function*(){let e=t.target;this.items!==[]&&0!=this.items.length||this.itemsSourceHandler(this.itemsSource);let i=t=>{let i=document.createElement("div");return i.setAttribute("class","autocomplete-row"),i.innerHTML="<strong>"+t+"</strong>",i.addEventListener("click",()=>{e.value=t,l()}),i},n=()=>{let t=[];for(let e in this.items)if(this.items[e].toLowerCase().includes(r.toLocaleLowerCase())){let n=i(this.items[e]);t.push(n)}return t},s=t=>{let e=this.endpoint+t;return fetch(e).then(t=>t.json()).then(t=>t.toString())},l=()=>{var t=e.parentNode.querySelector("#autocomplete-list");null!=t&&void 0!=t&&e.parentNode.removeChild(t)},o=t=>{if(l(),t.length>0){let i=(t=>{let e=document.createElement("div");e.setAttribute("id","autocomplete-list"),e.setAttribute("class","autocomplete-items");for(let i of t)e.appendChild(i);return e})(t);e.parentNode.appendChild(i)}},r=e.value;if(""!==r&&void 0!==r)if(this.isLocal()){let t=n();o(t)}else((t,e)=>{s(t).then(t=>{if(t){(t=>{let e=[];for(let n in t){let s=i(t[n]);e.push(s)}o(e)})(t.split(","))}else l()})})(r);else l()})}updateStyles(){this.style.width=this.width}render(){return this.updateStyles(),t("div",null,t("div",{class:"autocomplete",style:this.style},t("input",{autocomplete:"off",onInput:t=>e(this,void 0,void 0,function*(){return yield this.handleInput(t)}),type:"search",name:this.name,placeholder:this.placeholder,value:this.value})))}static get is(){return"nvq-autocomplete"}static get properties(){return{el:{elementRef:!0},itemsSource:{type:String,attr:"items-source",watchCallbacks:["itemsSourceHandler"]},name:{type:String,attr:"name"},placeholder:{type:String,attr:"placeholder"},value:{type:String,attr:"value"},width:{type:String,attr:"width"}}}static get style(){return"nvq-autocomplete .autocomplete{position:relative;display:inline-block}nvq-autocomplete .autocomplete input{border:1px solid transparent;background-color:#f1f1f1;font-size:16px;padding:10px;width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}nvq-autocomplete .autocomplete .autocomplete-items{position:absolute;z-index:100;top:100%;left:0;right:0;background-color:#fff}nvq-autocomplete .autocomplete .autocomplete-items .autocomplete-row{padding:1em;border-left:1px solid #d4d4d4;border-right:1px solid #d4d4d4;border-bottom:1px solid #d4d4d4}nvq-autocomplete .autocomplete .autocomplete-items .autocomplete-row:first-child{border-top:1px solid #d4d4d4}nvq-autocomplete .autocomplete .autocomplete-items .autocomplete-row:hover{background-color:#e9e9e9;cursor:pointer}"}}export{i as NvqAutocomplete};